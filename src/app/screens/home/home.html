<div class="flex flex-col h-full w-full bg-(--bg-100)">

    <app-search-bar (search)="performSearch($event)"></app-search-bar>

    <main class="flex-1 min-h-0 px-3 pb-3
                 sm:px-4 sm:pb-4
                 md:px-6 md:pb-6
                 lg:px-10 lg:pb-8">

        @if(searchService.hasSearched()) {
            <div class="flex justify-start mb-2 pl-1">
                <button (click)="clearSearch()" 
                    class="text-sm sm:text-base text-(--text-300) hover:text-(--text-200) cursor-pointer hover:scale-105">
                    {{ t().home.clearSearch }}
                </button>
            </div>
        }

        <div class="w-full h-full border border-(--bg-300) rounded-sm bg-(--bg-100) p-5">
            <ul>
                @if(!hasSearchResults() && this.searchService.hasSearched()){
                <p class="text-(--text-400)">{{ t().home.noResults }}</p>
                } @else {
                @for(item of searchService.searchResults(); track item.pageid){
                    <app-search-result-item 
                        [item]="item" 
                        [isFavorited]="isFavoritedArticle(item.pageid.toString())"
                        (toggleFavorite)="addFavoriteResult({title: item.title, snippet: item.snippet, pageId: item.pageid.toString()})">
                    </app-search-result-item>
                }
                }
            </ul>
            
            @if(hasSearchResults()) {
            <div class="flex flex-col gap-2 sm:gap-0 sm:flex-row justify-around items-center mt-4 pt-4 border-t border-(--bg-300)">
                <button 
                    class="px-1 sm:px-4 py-2 bg-(--bg-200) rounded-full disabled:opacity-50 disabled:cursor-not-allowed hover:bg-(--bg-300) cursor-pointer flex items-center gap-1"
                    [disabled]="!hasPrevPage()"
                    (click)="prevPage()">
                    <i-lucide [name]="arrowLeft" class="w-5 h-5"></i-lucide> <span>Anterior</span>
                </button>
                <span class="text-(--text-200) hidden sm:inline text-md">
                    Página {{currentPage()}} de {{totalPages()}}
                </span>
                <span class="text-(--text-200) sm:hidden flex flex-col items-center justify-center">
                    <span>{{currentPage()}} de</span>
                    <span class="text-(--text-200)">{{totalPages()}}</span>
                </span>
                <button 
                    class="px-1 sm:px-4 py-2 bg-(--bg-200) rounded-full disabled:opacity-50 disabled:cursor-not-allowed hover:bg-(--bg-300) cursor-pointer flex items-center gap-1"
                    [disabled]="!hasNextPage()"
                    (click)="nextPage()">
                    <span>Próxima</span> <i-lucide [name]="arrowRight" class="w-5 h-5"></i-lucide>
                </button>
            </div>
            }
        </div>
    </main>
</div>